<!DOCTYPE html>
<html>
	<head>
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
		<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css" /> 
		<link rel="stylesheet" href="css/themes/Dua.css" />
		<link rel="stylesheet" href="css/focusStyles.css" />
		<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
		<!--link rel="stylesheet" href="css/themes/themeTest.min.css" /-->
		<script type="text/javascript" src="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.min.js"></script>
		<!--datetimepicker-->
		<link href="css/mobiscroll-2.0rc3.custom.min.css" rel="stylesheet" type="text/css" />
		<script src="js/mobiscroll-2.0rc3.custom.min.js" type="text/javascript"></script>

    </head>
	<body>

		<div data-role="page" data-theme="a" id="loginPage">
	    <div data-role="header" data-position="fixed">
				
		 </div>		
			<div data-role="content">
				<a data-role="button" onclick="login()" data-transition="none">Login</a>
				<!--a data-role="button" onclick="testLogin()" href="#home" data-transition="none">Login test</a-->
			</div>
		</div>	
		
		<div data-role="page" data-theme="a" id="home">
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
				</div>
			<div data-role="content">	
				<!--div data-role="controlgroup"-->
				    <!--a data-role="button" href="#pedirAventon" data-transition="none"><img src="images/rideReq.jpg"></a-->
					<a data-role="button" href="#pedirAventon" data-transition="none">Pedir Aventon</a>
					<a data-role="button" href="#darAventon" data-transition="none">Ofrecer Aventon</a>
					<!--a data-role="button" href="#invitePage" data-transition="none">Invitar a mis amigos</a-->
					<a data-role="button" href="#duaFriendsListPage" data-transition="none" onclick="getDuaFriends()">Tus amigos</a>
				<!--/div-->
				<!--ul id="eventList_dua" data-role="listview" data-filter="false" data-mini="false"></ul-->
				<div data-role="controlgroup">
					<a data-role="button" onclick="logout()" href="#loginPage" data-transition="none">Salir</a>
				</div>
				<!--<button onclick="getSession()">Get session</button>-->
				<!--<a data-role="button" onclick="getLoginStatus()">Get login</a>-->
				<!--<a data-role="button" onclick="facebookWallPost()">facebookWallPost</a>-->
				<!--<a data-role="button" onclick="publishStoryFriend()">friendstory</a>-->
			</div>
		</div>
		
		<div data-role="page" data-theme="a" id="duaFriendsListPage">	
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<ul id="duaFriendsList" data-role="listview" data-filter="true"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-ajax="false">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="friendsDetailsPage">
	    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>		 
			<div data-role="content">
				<img id="userPic"/>
				<div id="userDetails">
				   <h3 id="fullName"></h3>
				   <p id="email"></p>
				   <p id="other"></p>
				</div>
			<a data-role="button" onclick="deleteDuaFriend()" data-ajax="false">Deshacer amistad</a>
			</div>
			<div data-role="content">
			    <h3>Eventos del usuario</h3>
				<ul id="duaFriendEventsList" data-role="listview" data-filter="false"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#duaFriendsListPage" data-ajax="false">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="invitePage">		
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<div data-role="controlgroup" data-mini="false">
					<a data-role="button" onclick="getFriendsFB()" href="#friendsPage" data-transition="none">Invitar privadamente</a>
					<a data-role="button" onclick="facebookWallPost()" data-transition="none">Invitar en mi Wall</a>
				</div>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-ajax="false">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="friendsPage">	
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<ul id="friendsList" data-role="listview" data-filter="true"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-transition="none">Atras</a>
		</div>	
		
		<div data-role="page" data-theme="a" id="pedirAventon">		
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content" id="contenidoPA">
			    <h3 align="center">Pedir Aventon</h3>
			    <div data-role="fieldcontain">
					 <label for="origenPA">Lugar de origen: </label>
					 <input type="text" name="origenPA" id="origenPA" value=""/>
					 <a data-role="button" name="btnPopUpPA" id="btnPopUpPA" onclick="getNearVenuesOrigen()" data-transition="none">Buscar</a>			 
				</div>
				<div data-role="fieldcontain">
					 <label for="destinoPA">Destino: </label>
					 <input type="text" name="destinoPA" id="destinoPA" value=""/>
					 <a data-role="button" name="btnPopUpPA" id="btnPopUpPA" onclick="getNearVenuesDestino()" data-transition="none">Buscar</a>			 
				</div>
				<div data-role="fieldcontain">
					 <label for="fechaPA">Fecha y hora: </label>
					 <input type="text" name="fechaPA" id="fechaPA" value=""/>
				</div>
				<div data-role="fieldcontain">
					<form id="form_pedirAv">	
							<ul id="friendsList_dua" data-role="listview" data-filter="false" data-mini="false"></ul>
					</form>
				</div>	
				<a data-role="button" onclick="pedirAv()" id="pA">Pedir aventon!</a>
			</div>
			<a data-role="button" data-icon="back" href="#home" id="AtrasPA" data-transition="none">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="darAventon">	
	    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>		
			<div data-role="content" id="contenidoDA">
				<h3 align="center">Ofrecer Aventon</h3>
			    <div data-role="fieldcontain">
					 <label for="origenDA">Lugar de origen: </label>
					 <input type="text" name="origenDA" id="origenDA" value=""/>
					 <a data-role="button" name="btnPopUpDA" id="btnPopUpDA" onclick="getNearVenuesOrigenDA()" data-transition="none">Buscar</a>			 
				</div>
				<div data-role="fieldcontain">
					 <label for="destinoDA">Destino: </label>
					 <input type="text" name="destinoDA" id="destinoDA" value=""/>
					 <a data-role="button" name="btnPopUpDA" id="btnPopUpDA" onclick="getNearVenuesDestinoDA()" data-transition="none">Buscar</a>			 
				</div>
				<div data-role="fieldcontain">
					 <label for="fechaDA">Fecha y hora: </label>
					 <input type="text" name="fechaDA" id="fechaDA" value=""/>
				</div>
				<a data-role="button" onclick="darAv()" id="dA" >Ofrecer aventon!</a>
			</div>
			<a data-role="button" data-icon="back" href="#home" id="AtrasDA" data-transition="none">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="personalNotifications">	
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<ul id="personalNotif" data-role="listview"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-ajax="false">Atras</a>
		</div>
		
		<div data-role="page" data-theme="a" id="friendsNotifications">	
			    <div data-role="header" data-position="fixed" >
				
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<ul id="friendsNotif" data-role="listview"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-ajax="false">Atras</a>
		</div>	
		
		<div data-role="page" data-theme="a" id="myRidesNotifications">	
			    <div data-role="header" data-position="fixed" >
				<div data-role="navbar" data-iconpos="top">
					<ul>
						<li><a href="#home" data-transition="none" data-icon="home" data-theme="b">Inicio</a></li>
						<li><a href="#personalNotifications" data-transition="none" data-icon="info" data-theme="b" onclick="perNotifTabClicked()">Eventos<span id="countBPerNotif" class="ui-li-count ui-btn-up-c ui-btn-corner-all a"></span></a></li>
						<li><a href="#myRidesNotifications" data-transition="none" data-icon="bars" data-theme="b" onclick="myRidesTabClicked()">Aventones</a></li>
						<li><a href="#friendsNotifications" data-transition="none" data-icon="star" data-theme="b" onclick="pubNotifTabClicked()">Noticias</a></li>
					</ul>
				</div><!-- /navbar -->
		 </div>
			<div data-role="content">
				<ul id="ridesNotif" data-role="listview"></ul>
			</div>
			<a data-role="button" data-icon="back" href="#home" data-ajax="false">Atras</a>
		</div>
		
        <!--<script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>-->
        <div id="fb-root"></div>
        <!-- cordova -->
		<script src="js/cordova-1.8.1.js"></script>
		<!-- Plugin para notificaciones en StatusBar -->
		<script type="text/javascript" charset="utf-8" src="js/statusbarnotification.js"></script>
		<!-- webSocket for Pusher -->
		<script src="js/websocket.js"></script>
		<!-- Pusher lib --> 
        <script src="http://js.pusher.com/1.12/pusher.js"></script>
	    <!-- cordova facebook plugin -->
		<script type="text/javascript" charset="utf-8" src="js/cdv-plugin-fb-connect.js"></script>
	    <!-- facebook js sdk -->
		<script src="js/facebook_js_sdk.js"></script>
		<!--js dameunAventon-->
		<script src="js/notifRenderer.js" type="text/javascript"></script>	
	    <script src="js/dameunav-mov.js" type="text/javascript"></script>	
		<script>
			
            if ((typeof cordova == 'undefined') && (typeof Cordova == 'undefined')) alert('Cordova variable does not exist. Check that you have included cordova.js correctly');
            if (typeof CDV == 'undefined') alert('CDV variable does not exist. Check that you have included cdv-plugin-fb-connect.js correctly');
            if (typeof FB == 'undefined') alert('FB variable does not exist. Check that you have included the Facebook JS SDK file.');
			
            document.addEventListener('deviceready', function() {
			                          //Check internet connection
										var networkState = navigator.network.connection.type;
										if (networkState == Connection.UNKNOWN || networkState == Connection.NONE){
											alert("No hay conexion a internet, intenta de nuevo!");
											$(location).attr('href',"#loginPage");
											return;
										}
									  
                                      try {
                                      //alert('Device is ready! Make sure you set your app_id below this alert.');
									  console.log('device ready: index');
                                      FB.init({ appId: "132921496839607", nativeInterface: CDV.FB, useCachedDialogs: false });
                                      }catch (e) {
										alert(e + " conectando a FB");
                                      }
                                      }, false);
            </script>
        <div id="log"></div>
	</body>
</html>